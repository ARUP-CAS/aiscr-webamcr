{% extends "base_logged_in.html" %}
{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}{% trans "pian.templates.detail.title" %}{% endblock %}
{% block head %}
<!-- Map imports -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
  integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
  crossorigin="" />
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
  integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
  crossorigin="">
  </script>

<script>
  var global_csrftoken = '{{ csrf_token }}';
</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
<script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css">


<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css'
  rel='stylesheet' />


  <script src="{% static 'convertToJTSK.js' %}"></script>
  <script src="{% static 'simpleheat.js' %}"></script>
  <script src="{% static 'HeatLayer.js' %}"></script>
  <script src="{% static 'leaflet.markercluster-src.js' %}"></script>
  <link rel="stylesheet" href="{% static 'MarkerCluster.css' %}" />
  <link rel="stylesheet" href="{% static 'MarkerCluster.Default.css' %}" />

<!-- static leaflet additional import-->
<link rel="stylesheet" href="{% static 'leaflet.measure.css' %}" />
<script src="{% static 'leaflet.measure.js' %}"></script>
<script type="text/javascript" src="{% static 'leaflet.coor.js' %}"></script>
<link rel="stylesheet" href="{% static 'leaflet.coor.css' %}" />

<link rel="stylesheet" href="{% static 'leaflet-search.css' %}"/>
<script src="{% static 'leaflet-search.js' %}"></script>
{% endblock %}

{% block content %}

<div>
  <style>
    #projectMap {
      width: 100%;
      height: 473px;
      border-radius: 5px;
    }

    .leaflet-right .leaflet-control {
      margin-right: 5px;
    }

    .leaflet-bottom .leaflet-control {
      margin-bottom: 5px;
    }

    #findbox {
		background: #eee;
		border-radius:.125em;
		border:2px solid #1978cf;
		box-shadow: 0 0 8px #999;
		margin-bottom: 10px;
		padding: 2px 0;
		width: 600px;
		height: 26px;
	}
	.search-tooltip {
		width: 200px;
	}
	.leaflet-control-search .search-cancel {
		position: static;
		float: left;
		margin-left: -22px;
	}
  </style>
  <div id="projectMap"></div>
</div>

<form method="post" onsubmit="submitBtn.disabled = true; return true;">
  <div class="card app-card-form">
    <div class="card-header">
      <div class="app-fx app-left">
        {% trans "pian.templates.detail.cardHeader" %}
      </div>
    </div>
    <div class="card-body">
      {% crispy form %}
    </div>
  </div>
  <button type="submit" id="submitBtn" class="btn btn-primary mt-3">{% trans "pian.templates.detail.submitButton.text" %}</button>
</form>

{% endblock %}

{% block script %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
<script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>
<script src="{% static 'mapa_akce.js' %}"></script>
{% endblock %}
