{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}
{% load template_tags%}
{% load cache %}

{% block title %}AMČR - Login{% endblock %}

{% block content %}
  <div class="app-login-wrapper">
    <div class="row">
        {% get_maintenance_login as action %}
        {% if action %}
        <div class="col-lg-4">
        </div>
        <div class="col-lg-4">
        <img alt="Archeologická mapa České republiky" class="mb-4" src="/static/static/logo-amcr-cs.svg"/>
        </div>
        </div>
        <div class="row">
        <div class="col-lg-2">
        </div>
        <div class="col-lg-8">
        <h1>{% trans "base.odstavka.prohibitLogin.Text" %}</h1>
        </div>
      {% else %}
      <div class="col-lg-4">
        <img class="mb-4" src="{% static 'logo-amcr-cs.svg' %}" alt="{% trans 'Archeologická mapa České republiky' %}" class="app-logo">
        <div class="card">
          <div class="card-body">
            <form method="post">
              <h1 class="h3 mb-3 font-weight-normal">{% trans "Přihlášení" %}</h1>
              {% csrf_token %}
              {% crispy form %}
              <div class="mb-3">
                <a href="{% url 'password_reset' %}" title="{% trans 'Zapomněli jste heslo' %}?">{% trans "Zapomněli jste heslo" %}?</a>
              </div>
              <button class="btn btn-primary btn-block" type="submit">{% trans "Přihlásit" %}</button>
              <p class="mt-3 mb-3 text-muted">
                {% trans "Nemáte účet" %}?
                <a href="/accounts/register" target="_blank" title="{% trans 'Zaregistrovat se' %}">{% trans "Zaregistrovat se" %}</a>
              </p>
              <hr />
              <div class="app-flags">
                <a href="#" title="{% trans 'Czech' %}">
                  <img src="{% static 'flag-cs.svg' %}" alt="" class="app-flag" />
                </a>
                <a href="#" title="{% trans 'Engish' %}">
                  <img src="{% static 'flag-en.svg' %}" alt="" class="app-flag" />
                </a>
              </div>
            </form>
          </div>
        </div>
      </div>
      <div class="col-lg-8 app-col-desc">
        <div class="app-inner">
          <div class="card app-desc">
            <div class="card-body">
              <h3>{% trans "Popis projektu" %}</h3>
              {% trans "loginPage.popisProjektu.text" %}
            </div>
          </div>
          <hr />
          <div class="card app-news">
            <div class="card-body">
              <h3>{% trans "Novinky" %}</h3>
              <div class="app-sroll-inner">
                {% trans "loginPage.novinky.text" %}
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
{% block script %}
  <script>
    document.getElementById("id_username").addEventListener("change", function () {
      this.value = this.value.toLowerCase(); 
    });
  </script>
  <script>
    const togglePassword = document.querySelector("#togglePassword");
    const password = document.querySelector("#id_password");

    togglePassword.addEventListener("click", function () {
        // toggle the type attribute
        const type = password.getAttribute("type") === "password" ? "text" : "password";
        password.setAttribute("type", type);
        
        // toggle the icon
        this.classList.toggle("bi-eye");
    });
  </script>
{% endblock %}
