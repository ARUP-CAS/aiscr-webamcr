{% extends "base_logged_in.html" %}
{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}{% trans "Přihlášení projektu " %}{{ projekt.ident_cely }}{% endblock %}
{% block head %}
{% endblock %}

{% block content %}
  <div class="app-entity-projekt">
    {% include "toolbar_projekt.html" %}
    <form method="POST">
      {% crispy form %}
      <div class="mt-3">
        <button type="submit" name="save" class="btn btn-primary mr-1" id="submit-id-save">{% translate 'Přihlásit projekt' %}</button>
        <button type="button" class="btn btn-secondary" onclick="window.history.back();">{% trans "Zpět" %}</button>
      </div>
    </form>
  </div>
{% endblock %}

{% block script %}
  <script>
      var pamatkova_ochrana = document.getElementById("id_kulturni_pamatka");
      var pamatka_cislo = document.getElementById("id_kulturni_pamatka_cislo").value
      var pamatka_popis = document.getElementById("id_kulturni_pamatka_popis").value
      document.addEventListener('DOMContentLoaded', checkPamatkovaOchrana);
      pamatkova_ochrana.addEventListener("change", checkPamatkovaOchrana);
      
      function checkPamatkovaOchrana() {
        console.log(pamatkova_ochrana.value);
        if (pamatkova_ochrana.value === "175") {
          disableFields();
        }
        else {
          enableFields();
        }
      };

      function disableFields() {
        pamatka_cislo = document.getElementById("id_kulturni_pamatka_cislo").value;
        document.getElementById("id_kulturni_pamatka_cislo").value = "";
        pamatka_popis = document.getElementById("id_kulturni_pamatka_popis").value;
        document.getElementById("id_kulturni_pamatka_popis").value = "";
        document.getElementById("id_kulturni_pamatka_cislo").disabled = true;
        document.getElementById("id_kulturni_pamatka_popis").disabled = true;
        document.getElementById("id_kulturni_pamatka_cislo").required = false;
        document.getElementById("id_kulturni_pamatka_popis").required = false;
      };

      function enableFields() {
        document.getElementById("id_kulturni_pamatka_cislo").value = pamatka_cislo;
        document.getElementById("id_kulturni_pamatka_popis").value = pamatka_popis;
        document.getElementById("id_kulturni_pamatka_cislo").disabled = false;
        document.getElementById("id_kulturni_pamatka_popis").disabled = false;
        document.getElementById("id_kulturni_pamatka_cislo").required = true;
        document.getElementById("id_kulturni_pamatka_popis").required = true;
      };
      
  </script>

{% endblock %}
