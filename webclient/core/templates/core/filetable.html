{% load i18n %}

<table class="table table-striped table-hover table-sm mb-0">
  <thead>
  <tr>
    <th scope="col">{% trans "Název" %}</th>
    <th scope="col">{% trans "Typ" %}</th>
    <th scope="col">{% trans "Velikost" %}</th>
    <th scope="col">{% trans "Datum vytvoření" %}</th>
    {% if show %}
      <th scope="col">{% trans "Smazat" %}</th>
      {% if allow_replace %}
        <th scope="col">{% trans "Nahradit" %}</th>
      {% endif %}
    {% endif %}
    <th scope="col">{% trans "Stáhnout" %}</th>
    <th scope="col">{% trans "Historie" %}</th>
  </tr>
  </thead>
  <tbody>
  {% for soubor in soubory %}
    <tr>
      <td>{{ soubor.nazev_zkraceny }}</td>
      <td>{{ soubor.mimetype }}</td>
      <td>{{ soubor.size_bytes }}</td>
      <td>{{ soubor.vytvoreno|date:'Y-m-d' }}</td>
      {% if show %}
        <td>
          <button id="file-smazat-{{soubor.id}}" class="file-smazat-btn" type="button" name="button" href="{% url 'core:delete_file' soubor.id %}?next={{ next_url }}{{ ident }}">
            <span class="material-icons app-color-danger">delete_forever</span>
          </button>
        </td>
        {% if allow_replace %}
          <td>
            <a href="{% url 'core:update_file' soubor.id %}?next={{ next_url }}{{ ident }}">
              <span class="material-icons app-color-danger">upgrade</span>
            </a>
          </td>
        {% endif %}
      {% endif %}
      <td>
        <a href="{% url 'core:download_file' soubor.id %}" target="_blank">
          <span class="material-icons">get_app</span>
        </a>
      </td>
      <td>
        <a href="{% url 'historie:soubor' soubor.id %}">
          <span class="material-icons">history</span>
        </a>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
<script>
  //script for modal for delete files
  document.addEventListener('DOMContentLoaded', function (event) {
    if (document.getElementsByClassName("file-smazat-btn")){
      elements = document.getElementsByClassName("file-smazat-btn")
      for (let i = 0; i < elements.length; i++){
        var options = Object.assign(defaults, {modalID: "modal-form",
        formID: "smazat-soubor-form",
        modalFormID: "#smazat-soubor-form",
        })
        console.log(elements.item(i))
        new Modal(options, elements.item(i).id);
      }
    }
  });
</script>
